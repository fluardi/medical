<div>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fluardi/cobA@f0d25fe0571c5bd3035dbe981d8acdb700822b61/css%20kuis/first.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fluardi/cobA@f0d25fe0571c5bd3035dbe981d8acdb700822b61/css%20kuis/second.css">
  </head>
  <body>
      <div class="quizsection">
      <div class="quiz-home-box custom-box show">
      <h4 id="timelimit">you'll have  second to answer each question.</h4>
      <button type="button" class="start-quiz-btn btn">Mulai Kuis</button>
      </div>
      <div class="quiz-box custom-box">
      <div class="stats">
      <div class="quiz-time">
      <div class="remaining-time"></div>
          <span class="time-up-text">Waktu habis</span>
      </div>
      <div class="score-board">
      <span class="score-text">Skor:</span>
      <span class="correct-answer"></span>
      </div>
      </div>
      <div class="question-box">
      <div class="current-question-num">
      </div>
      <div class="question-text">
          
      </div>
      </div>
      <div class="option-box">
  
      </div>
      <div class="answer-description">
          
      </div>
      <div class="next-question">
      <button type="button" class="next-question-btn btn">Pertanyaan berikutnya</button>
      <button type="button" class="see-result-btn btn">Lihat Hasil</button>
      </div>
       </div>
   
      <div class="quiz-over-box custom-box">
      <h1>Hasil Kuis</h1>
      <h4>Jumlah Pertanyaan: <span class="total-questions"></span></h4>
      <h4>Yg dijawab: <span class="total-attempt"></span></h4>
      <h4>Betul: <span class="total-correct"></span></h4>
      <h4>Salah: <span class="total-wrong"></span></h4>
      <h4>Persentasi: <span class="percentage"></span></h4>
      
      <hr>
  
      <button type="button" class="start-again-quiz-btn btn">Mulai Lagi</button>
      <button type="button" class="go-home-btn btn">Lihat materi Leptospirosis</button>
      <!-- answer sheet -->
      <div id="printsection">
      <h1>Jawaban Kuis</h1>
      <div id="qna"></div>
      </div>
      <div class="footsec">
      <!--<button class="share" onclick="window.open('whatsapp://send?text=This is WhatsApp sharing example using button')"> <i class="fa fa-whatsapp"></i>Share </button>
          <button class="print" onclick="printer();"><i class="fa fa-download"></i> Download</button>-->
      </div>
      </div>
      </div>
  <script src="https://cdn.jsdelivr.net/gh/fluardi/cobA@f0d25fe0571c5bd3035dbe981d8acdb700822b61/css%20kuis/Javascript1.js"></script>
  <script>
var time=60;myApp=[{question:'Seorang laki-laki usia 28 tahun datang dg keluhan panas, nyeri otot sejak 1 minggu lalu. Pasien bekerja sebagai cleaning service di sebuah perusahaan. TD: 110/70 N: 100x/m RR: 24x/m T: 38,2C. Terdapat nyeri tekan pada <i>m.gastrocnemius</i> kanan dan kiri. Pemeriksaan lab: Hb: 14,4 Leukosit: 15.800 dengan neutrofil 90%, Ur: 10 Cr: 0,5 SGOT 30 SGPT 20. Hasil urinalisis eritrosit: 3+ leukosit: 2+. <b>Apakah tatalaksana yang tepat untuk pasien saat ini?</b>', 
options:
['Doksisiklin 2x100 mg selama 5-7 hari ',
'Penisilin G i.v 1.5 juta unit / 8 jam selama 5 hari',
'Tetrasiklin 4x500 mg selama 5-7 hari',
'Metronidazol 3x500 mg selama 5 hari',
'Ciprofloxacin 2x500 mg selama 5 hari'],
answer:0 },
{question:'Seorang petani mengeluh demam sejak 5 hari. Pasien juga merasa linu-linu di seluruh badan. Sebelumnya pasien bekerja seperti biasa di sawah, dan jarang menggunakan sepatu. Pemeriksaan menunjukkan TD 120/80 nadi 88x RR 20x Tax 37.7, sklera ikterik, nyeri gastrocnemius (+), hepatomegaly (+). Laboratorium menunjukkan BUN 52, Cr 2.2. <b>Diagnosa yg tepat?</b>', 
options:
['Balantidiasis',
'Amoebiasis',
'Leptospirosis',
'Weil’s Disease',
'Hepatitis A'],
answer:3 },
{question:'Laki-laki, 38 tahun, datang dengan keluhan demam sejak 3 hari SMRS. Pasien juga mengeluh kaki terutama di otot betis terasa nyeri apabila dipegang. Nyeri kepala (+), mual (+), dan muntah(+). Sebelumnya diketahui pasien baru saja mengikuti kegiatan kerja bakti membersihkan selokan lingkungan. Pada pemeriksaan fisik didapatkan sklera ikterik dan hepatomegali. Pada pemeriksaan lab, didapatkan Hb 8 mg/dl, leukosit 11.200/ul, trombosit 170.000/ul, Bilirubin 2 mg/dl. <b>Pemeriksaan lanjutan yang dilakukan untuk menegakkan diagnosis adalah….</b> ', 
options:
['Apus darah tebal dan tipis',
'lgG/lgM Anti dengue, NSl',
'Microscopic Agglutination Test',
'OT/PT, Gamma GT',
'Hb/HT Trombosit serial/ 24jam'],
answer:2 }
]
  </script>
  <!--ini adalah script untuk navigasi-->
<script>
var timeLimit =time;
 document.getElementById('timelimit').innerHTML ="Selamat datang di kuis fluardi.site, ini adalah kuis tentang Leptospirosis.Kamu punya  "+timeLimit+" detik untuk menjawab tiap pertanyaan. Selamat Mengerjakan";
const section = document.getElementById('qna');

const fragment = document.createDocumentFragment();

myApp.forEach(question => {
  const paragraph = document.createElement('li');
  
  paragraph.innerHTML = `${question.question} - <span style='color: green;'>${question.options[question.answer]}</span>`;
  
  fragment.appendChild(paragraph);
});

section.appendChild(fragment);

function load(){
    number++;
   questionText.innerHTML=myApp[questionIndex].question;
    creatOptions();
    scoreBoard();
    currentQuestionNum.innerHTML=number + " / " +myApp.length;
}
function creatOptions(){
    optionBox.innerHTML="";
    let animationDelay=0.2;
    for(let i=0; i<myApp[questionIndex].options.length; i++){
        const option=document.createElement("div");
              option.innerHTML=myApp[questionIndex].options[i];
              option.classList.add("option");
              option.id=i;
              option.style.animationDelay=animationDelay + "s";
              animationDelay=animationDelay+0.2;
              option.setAttribute("onclick","check(this)");
              optionBox.appendChild(option);
        
    }
}

function generateRandomQuestion(){
    const randomNumber=Math.floor(Math.random() * myApp.length);
   let hitDuplicate=0;
   if(myArray.length == 0){
        questionIndex=randomNumber;
    }
    else{
        for(let i=0; i<myArray.length; i++){
            if(randomNumber == myArray[i]){
                //if duplicate found
                hitDuplicate=1;
                
            }
        }
        if(hitDuplicate == 1){
            generateRandomQuestion();
            return;
        }
        else{
            questionIndex=randomNumber;
        }
    }
    
    myArray.push(randomNumber);
    console.log(myArray)
    load();
}

function check(ele){
    const id=ele.id;
    if(id==myApp[questionIndex].answer){
       ele.classList.add("correct");
        score++;
        scoreBoard();
    }
    else{
        ele.classList.add("wrong");
        //show correct option when clicked answer is wrong
        for(let i=0; i<optionBox.children.length; i++){
            if(optionBox.children[i].id==myApp[questionIndex].answer){
                optionBox.children[i].classList.add("show-correct");
            }
        }
    }
    attempt++;
    disableOptions()
    showAnswerDescription();
    showNextQuestionBtn();
    stopTimer();
    
    if(number == myApp.length){
        quizOver();
    }
}
function timeIsUp(){
    showTimeUpText();
    //when time is up Show Correct Answer
    for(let i=0; i<optionBox.children.length; i++){
            if(optionBox.children[i].id==myApp[questionIndex].answer){
                optionBox.children[i].classList.add("show-correct");
				
            }
        }
    disableOptions()
    showAnswerDescription();
    showNextQuestionBtn();
	if(number == myApp.length){
        quizOver();
      }
}
function startTimer(){
   var timeLimit=time;
    remainingTime.innerHTML=timeLimit;
    remainingTime.classList.remove("less-time");
    interval=setInterval(()=>{
      timeLimit--;
        if(timeLimit < 10){
            timeLimit="0"+timeLimit;
            
            }
            if(timeLimit < 6){
                remainingTime.classList.add("less-time");
            }
            remainingTime.innerHTML=timeLimit;
            if(timeLimit == 0){
            clearInterval(interval);
            timeIsUp();
    }
    },1000)
}
function stopTimer(){
    clearInterval(interval);
}
function disableOptions(){
    for(let i=0; i<optionBox.children.length; i++){
        optionBox.children[i].classList.add("already-answered")
    }
}
function showAnswerDescription(){
    if(typeof myApp[questionIndex].description !== 'undefined'){
        answerDescription.classList.add("show");
        answerDescription.innerHTML=myApp[questionIndex].description;
    }
    
}
function hideAnswerDescription(){
    answerDescription.classList.remove("show");
    answerDescription.innerHTML="";
}

function showNextQuestionBtn(){
    nextQuestionBtn.classList.add("show");
}
function hideNextQuestionBtn(){
    nextQuestionBtn.classList.remove("show");
}
function showTimeUpText(){
    timeUpText.classList.add("show");
}
function hideTimeUpText(){
    timeUpText.classList.remove("show");
    
}
function scoreBoard(){
    correctAnswers.innerHTML=score;
}

nextQuestionBtn.addEventListener("click",nextQuestion);

function nextQuestion(){
   generateRandomQuestion();
    hideNextQuestionBtn();
    hideAnswerDescription();
    hideTimeUpText();
    startTimer();
}
function quizResult(){
    document.querySelector(".total-questions").innerHTML=myApp.length;
    document.querySelector(".total-attempt").innerHTML=attempt;
    document.querySelector(".total-correct").innerHTML=score;
    document.querySelector(".total-wrong").innerHTML=attempt-score;
    const percentage=(score/myApp.length)*100;
    document.querySelector(".percentage").innerHTML=percentage.toFixed(2) +"%";

}
function resetQuiz(){
  attempt=0;
  //questionIndex=0;
  score=0;
  number=0;
  myArray=[];
}

function quizOver(){
    nextQuestionBtn.classList.remove("show");
    seeResultBtn.classList.add("show");
}
seeResultBtn.addEventListener("click", ()=>{
    quizBox.classList.remove("show");
    seeResultBtn.classList.remove("show");
    quizOverBox.classList.add("show");
    quizResult();
     })

startAgainQuizBtn.addEventListener("click", ()=>{
    quizBox.classList.add("show");
    quizOverBox.classList.remove("show");
    resetQuiz();
    nextQuestion();
    })

goHomeBtn.addEventListener("click", ()=>{
    window.location='https://www.fluardi.site/divisi/ilmu-penyakit-dalam/leptospirosis',
  '_blank' || window.location.replace('https://www.fluardi.site/divisi/ilmu-penyakit-dalam/leptospirosis');
})

startQuizBtn.addEventListener("click", ()=>{
    quizHomeBox.classList.remove("show");
    quizBox.classList.add("show");
    nextQuestion();
})
  </script>
  </body>
  <br />
  </div>